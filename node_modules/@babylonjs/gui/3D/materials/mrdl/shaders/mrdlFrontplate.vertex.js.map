{"version":3,"file":"mrdlFrontplate.vertex.js","sourceRoot":"","sources":["../../../../../../../lts/gui/generated/3D/materials/mrdl/shaders/mrdlFrontplate.vertex.ts"],"names":[],"mappings":"AAAA,eAAe;AACf,OAAO,EAAE,WAAW,EAAE,+CAAiC;AAEvD,MAAM,IAAI,GAAG,4BAA4B,CAAC;AAC1C,MAAM,MAAM,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAsXb,CAAC;AACH,aAAa;AACb,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC;AACxC,gBAAgB;AAChB,MAAM,CAAC,MAAM,0BAA0B,GAAG,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC","sourcesContent":["// Do not edit.\nimport { ShaderStore } from \"core/Engines/shaderStore\";\n\nconst name = \"mrdlFrontplateVertexShader\";\nconst shader = `uniform mat4 world;\runiform mat4 viewProjection;\runiform vec3 cameraPosition;\rattribute vec3 position;\rattribute vec3 normal;\rattribute vec2 uv;\rattribute vec3 tangent;\rattribute vec4 color;\runiform float _Radius_;\runiform float _Line_Width_;\runiform bool _Relative_To_Height_;\runiform float _Filter_Width_;\runiform vec4 _Edge_Color_;\runiform float _Fade_Out_;\runiform bool _Smooth_Edges_;\runiform bool _Blob_Enable_;\runiform vec3 _Blob_Position_;\runiform float _Blob_Intensity_;\runiform float _Blob_Near_Size_;\runiform float _Blob_Far_Size_;\runiform float _Blob_Near_Distance_;\runiform float _Blob_Far_Distance_;\runiform float _Blob_Fade_Length_;\runiform float _Blob_Inner_Fade_;\runiform float _Blob_Pulse_;\runiform float _Blob_Fade_;\runiform float _Blob_Pulse_Max_Size_;\runiform bool _Blob_Enable_2_;\runiform vec3 _Blob_Position_2_;\runiform float _Blob_Near_Size_2_;\runiform float _Blob_Inner_Fade_2_;\runiform float _Blob_Pulse_2_;\runiform float _Blob_Fade_2_;\runiform float _Gaze_Intensity_;\runiform float _Gaze_Focus_;\runiform sampler2D _Blob_Texture_;\runiform float _Selection_Fuzz_;\runiform float _Selected_;\runiform float _Selection_Fade_;\runiform float _Selection_Fade_Size_;\runiform float _Selected_Distance_;\runiform float _Selected_Fade_Length_;\runiform float _Proximity_Max_Intensity_;\runiform float _Proximity_Far_Distance_;\runiform float _Proximity_Near_Radius_;\runiform float _Proximity_Anisotropy_;\runiform bool _Use_Global_Left_Index_;\runiform bool _Use_Global_Right_Index_;\runiform vec4 Global_Left_Index_Tip_Position;\runiform vec4 Global_Right_Index_Tip_Position;\rvarying vec3 vNormal;\rvarying vec2 vUV;\rvarying vec3 vTangent;\rvarying vec4 vExtra1;\rvarying vec4 vExtra2;\rvarying vec4 vExtra3;\rvoid Blob_Vertex_B40(\rvec3 Position,\rvec3 Normal,\rvec3 Tangent,\rvec3 Bitangent,\rvec3 Blob_Position,\rfloat Intensity,\rfloat Blob_Near_Size,\rfloat Blob_Far_Size,\rfloat Blob_Near_Distance,\rfloat Blob_Far_Distance,\rvec4 Vx_Color,\rvec2 UV,\rvec3 Face_Center,\rvec2 Face_Size,\rvec2 In_UV,\rfloat Blob_Fade_Length,\rfloat Selection_Fade,\rfloat Selection_Fade_Size,\rfloat Inner_Fade,\rfloat Blob_Pulse,\rfloat Blob_Fade,\rfloat Blob_Enabled,\rfloat DistanceOffset,\rout vec3 Out_Position,\rout vec2 Out_UV,\rout vec3 Blob_Info,\rout vec2 Blob_Relative_UV)\r{\rfloat blobSize,fadeIn;\rvec3 Hit_Position;\rBlob_Info=vec3(0.0,0.0,0.0);\rfloat Hit_Distance=dot(Blob_Position-Face_Center,Normal)+DistanceOffset*Blob_Far_Distance;\rHit_Position=Blob_Position-Hit_Distance*Normal;\rfloat absD=abs(Hit_Distance);\rfloat lerpVal=clamp((absD-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);\rfadeIn=1.0-clamp((absD-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);\rfloat innerFade=1.0-clamp(-Hit_Distance/Inner_Fade,0.0,1.0);\rfloat farClip=clamp(1.0-step(Blob_Far_Distance+Blob_Fade_Length,absD),0.0,1.0);\rfloat size=mix(Blob_Near_Size,Blob_Far_Size,lerpVal)*farClip;\rblobSize=mix(size,Selection_Fade_Size,Selection_Fade)*innerFade*Blob_Enabled;\rBlob_Info.x=lerpVal*0.5+0.5;\rBlob_Info.y=fadeIn*Intensity*(1.0-Selection_Fade)*Blob_Fade;\rBlob_Info.x*=(1.0-Blob_Pulse);\rvec3 delta=Hit_Position-Face_Center;\rvec2 blobCenterXY=vec2(dot(delta,Tangent),dot(delta,Bitangent));\rvec2 quadUVin=2.0*UV-1.0; \rvec2 blobXY=blobCenterXY+quadUVin*blobSize;\rvec2 blobClipped=clamp(blobXY,-Face_Size*0.5,Face_Size*0.5);\rvec2 blobUV=(blobClipped-blobCenterXY)/max(blobSize,0.0001)*2.0;\rvec3 blobCorner=Face_Center+blobClipped.x*Tangent+blobClipped.y*Bitangent;\rOut_Position=mix(Position,blobCorner,Vx_Color.rrr);\rOut_UV=mix(In_UV,blobUV,Vx_Color.rr);\rBlob_Relative_UV=blobClipped/Face_Size.y;\r}\rvoid Round_Rect_Vertex_B36(\rvec2 UV,\rvec3 Tangent,\rvec3 Binormal,\rfloat Radius,\rfloat Anisotropy,\rvec2 Blob_Center_UV,\rout vec2 Rect_UV,\rout vec2 Scale_XY,\rout vec4 Rect_Parms)\r{\rScale_XY=vec2(Anisotropy,1.0);\rRect_UV=(UV-vec2(0.5,0.5))*Scale_XY;\rRect_Parms.xy=Scale_XY*0.5-vec2(Radius,Radius);\rRect_Parms.zw=Blob_Center_UV;\r}\rvec2 ProjectProximity(\rvec3 blobPosition,\rvec3 position,\rvec3 center,\rvec3 dir,\rvec3 xdir,\rvec3 ydir,\rout float vdistance\r)\r{\rvec3 delta=blobPosition-position;\rvec2 xy=vec2(dot(delta,xdir),dot(delta,ydir));\rvdistance=abs(dot(delta,dir));\rreturn xy;\r}\rvoid Proximity_Vertex_B33(\rvec3 Blob_Position,\rvec3 Blob_Position_2,\rvec3 Face_Center,\rvec3 Position,\rfloat Proximity_Far_Distance,\rfloat Relative_Scale,\rfloat Proximity_Anisotropy,\rvec3 Normal,\rvec3 Tangent,\rvec3 Binormal,\rout vec4 Extra,\rout float Distance_To_Face,\rout float Distance_Fade1,\rout float Distance_Fade2)\r{\rfloat distz1,distz2;\rExtra.xy=ProjectProximity(Blob_Position,Position,Face_Center,Normal,Tangent*Proximity_Anisotropy,Binormal,distz1)/Relative_Scale;\rExtra.zw=ProjectProximity(Blob_Position_2,Position,Face_Center,Normal,Tangent*Proximity_Anisotropy,Binormal,distz2)/Relative_Scale;\rDistance_To_Face=dot(Normal,Position-Face_Center);\rDistance_Fade1=1.0-clamp(distz1/Proximity_Far_Distance,0.0,1.0);\rDistance_Fade2=1.0-clamp(distz2/Proximity_Far_Distance,0.0,1.0);\r}\rvoid Object_To_World_Pos_B12(\rvec3 Pos_Object,\rout vec3 Pos_World)\r{\rPos_World=(world*vec4(Pos_Object,1.0)).xyz;\r}\rvoid Choose_Blob_B27(\rvec4 Vx_Color,\rvec3 Position1,\rvec3 Position2,\rbool Blob_Enable_1,\rbool Blob_Enable_2,\rfloat Near_Size_1,\rfloat Near_Size_2,\rfloat Blob_Inner_Fade_1,\rfloat Blob_Inner_Fade_2,\rfloat Blob_Pulse_1,\rfloat Blob_Pulse_2,\rfloat Blob_Fade_1,\rfloat Blob_Fade_2,\rout vec3 Position,\rout float Near_Size,\rout float Inner_Fade,\rout float Blob_Enable,\rout float Fade,\rout float Pulse)\r{\rPosition=Position1*(1.0-Vx_Color.g)+Vx_Color.g*Position2;\rfloat b1=Blob_Enable_1 ? 1.0 : 0.0;\rfloat b2=Blob_Enable_2 ? 1.0 : 0.0;\rBlob_Enable=b1+(b2-b1)*Vx_Color.g;\rPulse=Blob_Pulse_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Pulse_2;\rFade=Blob_Fade_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Fade_2;\rNear_Size=Near_Size_1*(1.0-Vx_Color.g)+Vx_Color.g*Near_Size_2;\rInner_Fade=Blob_Inner_Fade_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Inner_Fade_2;\r}\rvoid Move_Verts_B32(\rvec2 UV,\rfloat Radius,\rfloat Anisotropy,\rfloat Line_Width,\rfloat Visible,\rout vec3 New_P,\rout vec2 New_UV)\r{\rvec2 xy=2.0*UV-vec2(0.5,0.5);\rvec2 center=clamp(xy,0.0,1.0);\rvec2 delta=2.0*(xy-center);\rfloat deltaLength=length(delta);\rvec2 aniso=vec2(1.0/Anisotropy,1.0);\rcenter=(center-vec2(0.5,0.5))*(1.0-2.0*Radius*aniso);\rNew_UV=vec2((2.0-2.0*deltaLength)*Visible,0.0);\rfloat deltaRadius= (Radius-Line_Width*New_UV.x);\rNew_P.xy=(center+deltaRadius/deltaLength *aniso*delta);\rNew_P.z=0.0;\r}\rvoid Object_To_World_Dir_B14(\rvec3 Dir_Object,\rout vec3 Binormal_World)\r{\rBinormal_World=(world*vec4(Dir_Object,0.0)).xyz;\r}\rvoid Proximity_Visibility_B55(\rfloat Selection,\rvec3 Proximity_Center,\rvec3 Proximity_Center_2,\rfloat Proximity_Far_Distance,\rfloat Proximity_Radius,\rvec3 Face_Center,\rvec3 Normal,\rvec2 Face_Size,\rfloat Gaze,\rout float Width)\r{\rfloat boxMaxSize=length(Face_Size)*0.5;\rfloat d1=dot(Proximity_Center-Face_Center,Normal);\rvec3 blob1=Proximity_Center-d1*Normal;\rfloat d2=dot(Proximity_Center_2-Face_Center,Normal);\rvec3 blob2=Proximity_Center_2-d2*Normal;\rvec3 delta1=blob1-Face_Center;\rvec3 delta2=blob2-Face_Center;\rfloat dist1=dot(delta1,delta1);\rfloat dist2=dot(delta2,delta2);\rfloat nearestProxDist=sqrt(min(dist1,dist2));\rWidth=(1.0-step(boxMaxSize+Proximity_Radius,nearestProxDist))*(1.0-step(Proximity_Far_Distance,min(d1,d2))*(1.0-step(0.0001,Selection)));\rWidth=max(Gaze,Width);\r}\rvec2 ramp2(vec2 start,vec2 end,vec2 x)\r{\rreturn clamp((x-start)/(end-start),vec2(0.0,0.0),vec2(1.0,1.0));\r}\rfloat computeSelection(\rvec3 blobPosition,\rvec3 normal,\rvec3 tangent,\rvec3 bitangent,\rvec3 faceCenter,\rvec2 faceSize,\rfloat selectionFuzz,\rfloat farDistance,\rfloat fadeLength\r)\r{\rvec3 delta=blobPosition-faceCenter;\rfloat absD=abs(dot(delta,normal));\rfloat fadeIn=1.0-clamp((absD-farDistance)/fadeLength,0.0,1.0);\rvec2 blobCenterXY=vec2(dot(delta,tangent),dot(delta,bitangent));\rvec2 innerFace=faceSize*(1.0-selectionFuzz)*0.5;\rvec2 selectPulse=ramp2(-faceSize*0.5,-innerFace,blobCenterXY)-ramp2(innerFace,faceSize*0.5,blobCenterXY);\rreturn selectPulse.x*selectPulse.y*fadeIn;\r}\rvoid Selection_Vertex_B31(\rvec3 Blob_Position,\rvec3 Blob_Position_2,\rvec3 Face_Center,\rvec2 Face_Size,\rvec3 Normal,\rvec3 Tangent,\rvec3 Bitangent,\rfloat Selection_Fuzz,\rfloat Selected,\rfloat Far_Distance,\rfloat Fade_Length,\rvec3 Active_Face_Dir,\rout float Show_Selection)\r{\rfloat select1=computeSelection(Blob_Position,Normal,Tangent,Bitangent,Face_Center,Face_Size,Selection_Fuzz,Far_Distance,Fade_Length);\rfloat select2=computeSelection(Blob_Position_2,Normal,Tangent,Bitangent,Face_Center,Face_Size,Selection_Fuzz,Far_Distance,Fade_Length);\rShow_Selection=mix(max(select1,select2),1.0,Selected);\r}\rvoid main()\r{\rvec3 Vec3_Q29=vec3(vec2(0,0).x,vec2(0,0).y,color.r);\rvec3 Nrm_World_Q24;\rNrm_World_Q24=normalize((world*vec4(normal,0.0)).xyz);\rvec3 Face_Center_Q30;\rFace_Center_Q30=(world*vec4(vec3(0,0,0),1.0)).xyz;\rvec3 Tangent_World_Q13;\rTangent_World_Q13=(world*vec4(tangent,0.0)).xyz;\rvec3 Result_Q42;\rResult_Q42=_Use_Global_Left_Index_ ? Global_Left_Index_Tip_Position.xyz : _Blob_Position_;\rvec3 Result_Q43;\rResult_Q43=_Use_Global_Right_Index_ ? Global_Right_Index_Tip_Position.xyz : _Blob_Position_2_;\rfloat Value_At_T_Q58=mix(_Blob_Near_Size_,_Blob_Pulse_Max_Size_,_Blob_Pulse_);\rfloat Value_At_T_Q59=mix(_Blob_Near_Size_2_,_Blob_Pulse_Max_Size_,_Blob_Pulse_2_);\rvec3 Cross_Q70=cross(normal,tangent);\rfloat Product_Q45=_Gaze_Intensity_*_Gaze_Focus_;\rfloat Step_Q46=step(0.0001,Product_Q45);\rvec3 Tangent_World_N_Q15=normalize(Tangent_World_Q13);\rvec3 Position_Q27;\rfloat Near_Size_Q27;\rfloat Inner_Fade_Q27;\rfloat Blob_Enable_Q27;\rfloat Fade_Q27;\rfloat Pulse_Q27;\rChoose_Blob_B27(color,Result_Q42,Result_Q43,_Blob_Enable_,_Blob_Enable_2_,Value_At_T_Q58,Value_At_T_Q59,_Blob_Inner_Fade_,_Blob_Inner_Fade_2_,_Blob_Pulse_,_Blob_Pulse_2_,_Blob_Fade_,_Blob_Fade_2_,Position_Q27,Near_Size_Q27,Inner_Fade_Q27,Blob_Enable_Q27,Fade_Q27,Pulse_Q27);\rvec3 Binormal_World_Q14;\rObject_To_World_Dir_B14(Cross_Q70,Binormal_World_Q14);\rfloat Anisotropy_Q21=length(Tangent_World_Q13)/length(Binormal_World_Q14);\rvec3 Binormal_World_N_Q16=normalize(Binormal_World_Q14);\rvec2 Face_Size_Q35;\rfloat ScaleY_Q35;\rFace_Size_Q35=vec2(length(Tangent_World_Q13),length(Binormal_World_Q14));\rScaleY_Q35=Face_Size_Q35.y;\rfloat Out_Radius_Q38;\rfloat Out_Line_Width_Q38;\rOut_Radius_Q38=_Relative_To_Height_ ? _Radius_ : _Radius_/ScaleY_Q35;\rOut_Line_Width_Q38=_Relative_To_Height_ ? _Line_Width_ : _Line_Width_/ScaleY_Q35;\rfloat Show_Selection_Q31;\rSelection_Vertex_B31(Result_Q42,Result_Q43,Face_Center_Q30,Face_Size_Q35,Nrm_World_Q24,Tangent_World_N_Q15,Binormal_World_N_Q16,_Selection_Fuzz_,_Selected_,_Selected_Distance_,_Selected_Fade_Length_,vec3(0,0,-1),Show_Selection_Q31);\rfloat MaxAB_Q41=max(Show_Selection_Q31,Product_Q45);\rfloat Width_Q55;\rProximity_Visibility_B55(Show_Selection_Q31,Result_Q42,Result_Q43,_Proximity_Far_Distance_,_Proximity_Near_Radius_,Face_Center_Q30,Nrm_World_Q24,Face_Size_Q35,Step_Q46,Width_Q55);\rvec3 New_P_Q32;\rvec2 New_UV_Q32;\rMove_Verts_B32(uv,Out_Radius_Q38,Anisotropy_Q21,Out_Line_Width_Q38,Width_Q55,New_P_Q32,New_UV_Q32);\rvec3 Pos_World_Q12;\rObject_To_World_Pos_B12(New_P_Q32,Pos_World_Q12);\rvec3 Out_Position_Q40;\rvec2 Out_UV_Q40;\rvec3 Blob_Info_Q40;\rvec2 Blob_Relative_UV_Q40;\rBlob_Vertex_B40(Pos_World_Q12,Nrm_World_Q24,Tangent_World_N_Q15,Binormal_World_N_Q16,Position_Q27,_Blob_Intensity_,Near_Size_Q27,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,color,uv,Face_Center_Q30,Face_Size_Q35,New_UV_Q32,_Blob_Fade_Length_,_Selection_Fade_,_Selection_Fade_Size_,Inner_Fade_Q27,Pulse_Q27,Fade_Q27,Blob_Enable_Q27,0.0,Out_Position_Q40,Out_UV_Q40,Blob_Info_Q40,Blob_Relative_UV_Q40);\rvec2 Rect_UV_Q36;\rvec2 Scale_XY_Q36;\rvec4 Rect_Parms_Q36;\rRound_Rect_Vertex_B36(New_UV_Q32,Tangent_World_Q13,Binormal_World_Q14,Out_Radius_Q38,Anisotropy_Q21,Blob_Relative_UV_Q40,Rect_UV_Q36,Scale_XY_Q36,Rect_Parms_Q36);\rvec4 Extra_Q33;\rfloat Distance_To_Face_Q33;\rfloat Distance_Fade1_Q33;\rfloat Distance_Fade2_Q33;\rProximity_Vertex_B33(Result_Q42,Result_Q43,Face_Center_Q30,Pos_World_Q12,_Proximity_Far_Distance_,1.0,_Proximity_Anisotropy_,Nrm_World_Q24,Tangent_World_N_Q15,Binormal_World_N_Q16,Extra_Q33,Distance_To_Face_Q33,Distance_Fade1_Q33,Distance_Fade2_Q33);\rvec4 Vec4_Q37=vec4(MaxAB_Q41,Distance_Fade1_Q33,Distance_Fade2_Q33,Out_Radius_Q38);\rvec3 Position=Out_Position_Q40;\rvec3 Normal=Vec3_Q29;\rvec2 UV=Out_UV_Q40;\rvec3 Tangent=Blob_Info_Q40;\rvec3 Binormal=vec3(0,0,0);\rvec4 Color=vec4(1,1,1,1);\rvec4 Extra1=Rect_Parms_Q36;\rvec4 Extra2=Extra_Q33;\rvec4 Extra3=Vec4_Q37;\rgl_Position=viewProjection*vec4(Position,1);\rvNormal=Normal;\rvUV=UV;\rvTangent=Tangent;\rvExtra1=Extra1;\rvExtra2=Extra2;\rvExtra3=Extra3;\r}`;\n// Sideeffect\nShaderStore.ShadersStore[name] = shader;\n/** @internal */\nexport const mrdlFrontplateVertexShader = { name, shader };\n"]}